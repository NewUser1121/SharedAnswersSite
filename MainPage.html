<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shared Answers - Welcome</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="MainRecourses/MainPage.css">
    <link rel="stylesheet" href="MainRecourses/extraMainPage.css">
</head>
<body>
    <div class="main-bg">
        <!-- Floating Bubbles Background -->
        <div class="bubbles-bg" aria-hidden="true"></div>
        <!-- Landing Section -->
        <div class="landing-section">
            <div class="header">
                <h1 class="site-title" id="siteTitleClickable" style="cursor:pointer;">Key</h1>
                <p class="site-subtitle">Fully Completed Assignments Throughout time</p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-graduation-cap"></i>
                    <h3>Multiple Grades</h3>
                    <p>Access The Full Recourses for 10th and 11th grade Classes</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-book-reader"></i>
                    <h3>Complete Solutions</h3>
                    <p>Find The Full Answers Multiple subjects</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-clock"></i>
                    <h3>24/7 Access</h3>
                    <p>Study at your own pace, anytime, anywhere</p>
                </div>
            </div>

            <div class="cta-buttons">
                <button id="showLoginBtn" class="primary-btn">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>
                <button id="showRegisterBtn" class="primary-btn">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
                <button id="contactMeBtn" class="primary-btn contact-btn" type="button">
                    <i class="fas fa-envelope"></i> Contact Me
                </button>
            </div>
        </div>

        <!-- Login/Register Modal -->
        <div id="authModal" class="modal">
            <div class="container glass">
                <div class="login-section">
                    <h2>Sign In</h2>
                    <form id="loginForm">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="username" placeholder="Username" autocomplete="username">
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="password" placeholder="Password" autocomplete="current-password">
                        </div>
                        <button type="submit" class="primary-btn">Login</button>
                        <div id="loginMessage"></div>
                    </form>
                </div>

                <div class="account-section">
                    <h2>Account Configuration</h2>
                    <div class="api-key-form">
                        <input type="text" id="apiKey" placeholder="Enter your API key">
                        <button id="saveApiKey">Save API Key</button>
                        <div class="api-status">
                            <span id="apiStatus"></span>
                            <div id="accessibleGrades"></div>
                        </div>
                    </div>
                </div>

                <div class="grade-selector-section">
                    <h2>Select Your Grade</h2>
                    <div class="grade-buttons">
                        <button class="grade-btn" data-grade="10th">10th Grade</button>
                        <button class="grade-btn" data-grade="11th">11th Grade</button>
                    </div>
                    <div id="subjectsContainer"></div>
                </div>

                <button id="closeModal" class="close-btn">&times;</button>
            </div>
        </div>

        <!-- Register Modal -->
        <div id="registerModal" class="modal">
            <div class="container glass register-container">
                <div class="register-form-section">
                    <h2>Create Your Account</h2>
                    <p class="register-subtitle">Join our community of learners</p>
                    <form id="registerForm">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="newUsername" placeholder="Choose Username" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="email" placeholder="Email Address" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="newPassword" placeholder="Choose Password" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-check-circle input-icon"></i>
                            <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
                        </div>
                        <button type="submit" class="primary-btn">Create Account</button>
                        <div id="registerMessage"></div>
                    </form>
                </div>
                
                <div class="register-info-section">
                    <div class="help-container">
                        <h3>Need Help?</h3>
                        <p class="help-text">Contact me directly through any of these platforms:</p>
                        <!-- Snapcode image removed from here -->
                        <div class="contact-preview">
                            <div class="contact-item">
                                <i class="fab fa-discord"></i>
                                <span><strong>Discord:</strong> kaleb6768</span>
                            </div>
                            <div class="contact-item">
                                <i class="fab fa-snapchat-ghost"></i>
                                <span><strong>Snapchat:</strong> kalebridgeway</span>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-envelope"></i>
                                <span><strong>Email:</strong> <a href="mailto:KalebRidgeway0@gmail.com" class="register-email-link">KalebRidgeway0@gmail.com</a></span>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="closeRegisterModal" class="close-btn" aria-label="Close">&times;</button>
            </div>
        </div>

        <!-- Contact Modal (Remade) -->
        <div id="contactModal" class="modal">
            <div class="container glass contact-modal-container">
                <button id="closeContactModal" class="close-btn" aria-label="Close">&times;</button>
                <div class="contact-modal-header">
                    <h2>Contact Support</h2>
                    <p>We're here to help! Reach out through any of the following methods:</p>
                </div>
                <div class="contact-modal-grid">
                    <div class="contact-modal-card">
                        <i class="fab fa-discord"></i>
                        <div>
                            <h3>Discord</h3>
                            <p class="contact-modal-detail">kaleb6768 <button class="copy-btn" onclick="navigator.clipboard.writeText('kaleb6768');this.innerText='Copied!';setTimeout(()=>this.innerText='Copy',1200);">Copy</button></p>
                        </div>
                    </div>
                    <div class="contact-modal-card">
                        <i class="fab fa-snapchat-ghost"></i>
                        <div>
                            <h3>Snapchat</h3>
                            <a class="contact-modal-detail" href="https://www.snapchat.com/add/kalebridgeway" target="_blank" rel="noopener">@kalebridgeway</a>
                        </div>
                    </div>
                    <div class="contact-modal-card">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h3>Email</h3>
                            <a class="contact-modal-detail" href="mailto:KalebRidgeway0@gmail.com">KalebRidgeway0@gmail.com</a>
                        </div>
                    </div>
                </div>
                <div class="contact-modal-snapcode">
                    <img src="MainRecourses/snapcode.jpg" alt="My Snapcode" class="snapcode-img">
                    <div>Scan to add on Snapchat</div>
                </div>
            </div>
        </div>

        <!-- Contact Me Modal -->
        <div id="contactMeModal" class="modal">
            <div class="container glass contact-modal-container">
                <button id="closeContactMeModal" class="close-btn" aria-label="Close">&times;</button>
                <div class="contact-modal-header">
                    <h2>Contact Me</h2>
                    <p>Reach out through any of these platforms:</p>
                </div>
                <div class="contact-modal-grid">
                    <div class="contact-modal-card">
                        <i class="fab fa-discord"></i>
                        <div>
                            <h3>Discord</h3>
                            <p class="contact-modal-detail">kaleb6768 <button class="copy-btn" onclick="navigator.clipboard.writeText('kaleb6768');this.innerText='Copied!';setTimeout(()=>this.innerText='Copy',1200);">Copy</button></p>
                        </div>
                    </div>
                    <div class="contact-modal-card">
                        <i class="fab fa-snapchat-ghost"></i>
                        <div>
                            <h3>Snapchat</h3>
                            <a class="contact-modal-detail" href="https://www.snapchat.com/add/kalebridgeway" target="_blank" rel="noopener">@kalebridgeway</a>
                        </div>
                    </div>
                    <div class="contact-modal-card">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h3>Email</h3>
                            <a class="contact-modal-detail" href="mailto:KalebRidgeway0@gmail.com">KalebRidgeway0@gmail.com</a>
                        </div>
                    </div>
                </div>
                <div class="contact-modal-snapcode">
                    <img src="MainRecourses/snapcode.jpg" alt="My Snapcode" class="snapcode-img">
                    <div>Scan to add on Snapchat</div>
                </div>
            </div>
        </div>

        <footer class="footer">Shared Answers &copy; 2025</footer>
    </div>
    <script src="https://kit.fontawesome.com/c4254e24a8.js" crossorigin="anonymous"></script>
    <script src="MainRecourses/userAuth.js"></script>
    <script src="MainRecourses/MainPage.js"></script>    <script>
    // Enhanced floating bubbles animation with performance optimizations
    const bubbleManager = {
        container: null,
        isPageVisible: true,
        isRunning: false,
        spawnInterval: null,
        cleanupInterval: null,
        MAX_BUBBLES: 10,
        SPAWN_DELAY: 2500,
        CLEANUP_INTERVAL: 5000,

        init() {
            this.container = document.querySelector('.bubbles-bg');
            if (!this.container) return;

            // Visibility change handling
            document.addEventListener('visibilitychange', () => {
                this.isPageVisible = document.visibilityState === 'visible';
                if (this.isPageVisible) {
                    this.start();
                } else {
                    this.pause();
                }
            });

            // Handle page unload
            window.addEventListener('beforeunload', () => this.cleanup());

            // Start the animation
            this.start();

            // Set up periodic cleanup
            this.cleanupInterval = setInterval(() => this.cleanupOldBubbles(), this.CLEANUP_INTERVAL);
        },

        createBubble() {
            if (!this.isPageVisible || !this.isRunning) return;
            if (this.container.children.length >= this.MAX_BUBBLES) return;

            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            // More conservative size and animation settings
            const size = Math.floor(this.randomBetween(32, 96));
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            bubble.style.left = `${this.randomBetween(5, 95)}vw`;
            bubble.style.animationDuration = `${this.randomBetween(12, 15)}s`;
            bubble.style.opacity = this.randomBetween(0.15, 0.22);
            bubble.style.filter = `blur(${this.randomBetween(0.5, 1)}px)`;

            // Add timestamp for cleanup
            bubble.dataset.created = Date.now().toString();
            
            // Remove bubble when animation ends
            bubble.addEventListener('animationend', () => {
                if (this.container.contains(bubble)) {
                    bubble.remove();
                }
            });

            this.container.appendChild(bubble);
        },

        randomBetween(min, max) {
            return min + Math.random() * (max - min);
        },

        start() {
            if (this.isRunning) return;
            this.isRunning = true;
            
            // Initial bubbles
            for (let i = 0; i < 5; i++) {
                setTimeout(() => this.createBubble(), i * 800);
            }

            // Continuous bubble creation
            this.spawnInterval = setInterval(() => this.createBubble(), this.SPAWN_DELAY);
        },

        pause() {
            this.isRunning = false;
            if (this.spawnInterval) {
                clearInterval(this.spawnInterval);
                this.spawnInterval = null;
            }
        },

        cleanupOldBubbles() {
            if (!this.container) return;
            
            const now = Date.now();
            const bubbles = this.container.getElementsByClassName('bubble');
            
            // Convert to array to avoid issues with live HTMLCollection
            Array.from(bubbles).forEach(bubble => {
                const created = parseInt(bubble.dataset.created || '0');
                if (now - created > 15000) { // Remove bubbles older than 15 seconds
                    bubble.remove();
                }
            });
        },

        cleanup() {
            this.pause();
            if (this.cleanupInterval) {
                clearInterval(this.cleanupInterval);
                this.cleanupInterval = null;
            }
            if (this.container) {
                this.container.innerHTML = '';
            }
        }
    };

    // Initialize bubble animation when DOM is loaded
    window.addEventListener('DOMContentLoaded', () => bubbleManager.init());

    // Contact Modal logic (remade)
    document.addEventListener('DOMContentLoaded', function() {
        var showContactBtn = document.getElementById('showContactBtn');
        var contactModal = document.getElementById('contactModal');
        var closeContactModal = document.getElementById('closeContactModal');
        if (showContactBtn && contactModal && closeContactModal) {
            showContactBtn.onclick = function(e) {
                e.preventDefault();
                contactModal.style.display = 'flex';
                setTimeout(function() {
                    contactModal.classList.add('active');
                }, 10);
            };
            closeContactModal.onclick = function() {
                contactModal.classList.remove('active');
                setTimeout(function() {
                    contactModal.style.display = 'none';
                }, 200);
            };
            contactModal.onclick = function(e) {
                if (e.target === contactModal) {
                    contactModal.classList.remove('active');
                    setTimeout(function() {
                        contactModal.style.display = 'none';
                    }, 200);
                }
            };
        }
    });

    // Make site title clickable for admin panel redirect
    const siteTitle = document.getElementById('siteTitleClickable');
    if(siteTitle) {
        siteTitle.addEventListener('click', () => {
            window.location.href = 'adminpanel.html';
        });
    }

    // Contact Me Modal logic
    document.addEventListener('DOMContentLoaded', function() {
        var contactBtn = document.getElementById('contactMeBtn');
        var contactModal = document.getElementById('contactMeModal');
        var closeContactModal = document.getElementById('closeContactMeModal');
        if (contactBtn && contactModal && closeContactModal) {
            contactBtn.addEventListener('click', function(e) {
                e.preventDefault();
                contactModal.style.display = 'flex';
                setTimeout(function() {
                    contactModal.classList.add('active');
                }, 10);
            });
            closeContactModal.addEventListener('click', function() {
                contactModal.classList.remove('active');
                setTimeout(function() {
                    contactModal.style.display = 'none';
                }, 200);
            });
            contactModal.addEventListener('click', function(e) {
                if (e.target === contactModal) {
                    contactModal.classList.remove('active');
                    setTimeout(function() {
                        contactModal.style.display = 'none';
                    }, 200);
                }
            });
        }
    });
    </script>
</body>
</html>
